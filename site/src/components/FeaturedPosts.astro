---
import { Image } from 'astro:assets';
import FormattedDate from './FormattedDate.astro';

interface Props {
	posts: any[];
	showDate?: boolean;
	title?: string;
	gridCols?: 'two' | 'three';
}

const { 
	posts, 
	showDate = true, 
	title = "Featured Projects",
	gridCols = 'three'
} = Astro.props;

const gridClass = gridCols === 'two' ? 'md:grid-cols-2' : 'md:grid-cols-2 lg:grid-cols-3';
---

{posts.length > 0 && (
	<section class="mb-16">
		<h2 class="text-2xl font-bold mb-8 text-black">{title}</h2>
		<div class={`grid ${gridClass} gap-8`}>
			{posts.map((post) => (
				<article class="border border-gray-200 rounded-lg overflow-hidden hover:border-gray-300 transition-colors group">
					{post.data.heroImage && (
						<div class="aspect-video overflow-hidden">
							<Image 
								src={post.data.heroImage} 
								alt={post.data.title}
								width={400}
								height={225}
								class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
							/>
						</div>
					)}
					<div class="p-6">
						{showDate && (
							<div class="text-sm text-gray-500 mb-2">
								<FormattedDate date={post.data.pubDate} />
							</div>
						)}
						<h3 class="text-xl font-bold mb-3">
							<a href={`/posts/${post.id}`} class="text-black hover:text-gray-700 no-underline">
								{post.data.title}
							</a>
						</h3>
						<p class="text-gray-700 mb-4 leading-relaxed">
							{post.data.description}
						</p>
						{post.data.tags && (
							<div class="flex flex-wrap gap-2 mb-4">
								{post.data.tags.slice(0, 3).map((tag) => (
									<a 
										href={`/posts/tag/${tag}`}
										class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded hover:bg-gray-200 transition-colors"
									>
										{tag}
									</a>
								))}
							</div>
						)}
						<a 
							href={`/posts/${post.id}`}
							class="text-black hover:text-gray-700 text-sm font-medium underline underline-offset-2"
						>
							Read More â†’
						</a>
					</div>
				</article>
			))}
		</div>
	</section>
)}
